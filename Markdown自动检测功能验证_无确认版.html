<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdownè‡ªåŠ¨æ£€æµ‹åŠŸèƒ½éªŒè¯ - æ— ç¡®è®¤ç‰ˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .input-section, .result-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .input-section h3, .result-section h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #007AFF;
            padding-bottom: 10px;
        }
        textarea {
            width: 100%;
            height: 200px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
        }
        textarea:focus {
            border-color: #007AFF;
            outline: none;
        }
        .detection-result {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }
        .confidence-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4757, #ffa726, #66bb6a, #42a5f5);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        .status {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            margin: 5px 0;
        }
        .status.detected {
            background: #d4edda;
            color: #155724;
        }
        .status.not-detected {
            background: #f8d7da;
            color: #721c24;
        }
        .status.auto-switch {
            background: #d1ecf1;
            color: #0c5460;
        }
        .features {
            margin-top: 10px;
        }
        .feature-tag {
            background: #007AFF;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin: 2px;
            display: inline-block;
        }
        .examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        .example-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        .example-btn:hover {
            background: #0056CC;
        }
        .workflow {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        .step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .step-number {
            background: #007AFF;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            font-size: 12px;
        }
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .icon {
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“ Markdownè‡ªåŠ¨æ£€æµ‹åŠŸèƒ½éªŒè¯</h1>
        <p style="color: #666; margin: 10px 0;">æ— éœ€ç¡®è®¤å¯¹è¯æ¡† - è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬</p>
        <div class="highlight">
            <strong>ğŸ¯ æ–°åŠŸèƒ½ç‰¹ç‚¹ï¼š</strong>
            <ul style="text-align: left; margin: 10px 0;">
                <li>âœ… ç²˜è´´Markdownå†…å®¹æ—¶è‡ªåŠ¨è¯†åˆ«</li>
                <li>âœ… ç½®ä¿¡åº¦ > 40% æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°Markdownæ¨¡å¼</li>
                <li>âœ… æ— éœ€ç”¨æˆ·ç¡®è®¤ï¼Œç›´æ¥åº”ç”¨å†…å®¹</li>
                <li>âœ… æ™ºèƒ½æ£€æµ‹20+ç§Markdownè¯­æ³•ç‰¹å¾</li>
            </ul>
        </div>
    </div>

    <div class="test-container">
        <div class="input-section">
            <h3>ğŸ”¤ æµ‹è¯•è¾“å…¥åŒºåŸŸ</h3>
            <textarea id="testInput" placeholder="åœ¨è¿™é‡Œç²˜è´´æˆ–è¾“å…¥æµ‹è¯•å†…å®¹...&#10;&#10;è¯•è¯•ç²˜è´´ä¸€äº›Markdownæ ¼å¼çš„æ–‡æœ¬ï¼"></textarea>
            
            <div class="examples">
                <button class="example-btn" onclick="setExample('headers')">ğŸ“° æ ‡é¢˜ç¤ºä¾‹</button>
                <button class="example-btn" onclick="setExample('list')">ğŸ“‹ åˆ—è¡¨ç¤ºä¾‹</button>
                <button class="example-btn" onclick="setExample('code')">ğŸ’» ä»£ç ç¤ºä¾‹</button>
                <button class="example-btn" onclick="setExample('links')">ğŸ”— é“¾æ¥ç¤ºä¾‹</button>
                <button class="example-btn" onclick="setExample('table')">ğŸ“Š è¡¨æ ¼ç¤ºä¾‹</button>
                <button class="example-btn" onclick="setExample('complex')">ğŸ¯ å¤æ‚ç¤ºä¾‹</button>
                <button class="example-btn" onclick="setExample('plain')">ğŸ“„ çº¯æ–‡æœ¬</button>
            </div>
        </div>

        <div class="result-section">
            <h3>ğŸ” æ£€æµ‹ç»“æœ</h3>
            <div class="detection-result">
                <div id="detectionStatus" class="status not-detected">ç­‰å¾…è¾“å…¥...</div>
                <div>ç½®ä¿¡åº¦: <span id="confidenceText">0%</span></div>
                <div class="confidence-bar">
                    <div id="confidenceFill" class="confidence-fill" style="width: 0%"></div>
                </div>
                <div id="autoSwitchIndicator" style="display: none;">
                    <div class="status auto-switch">ğŸš€ å°†è‡ªåŠ¨åˆ‡æ¢åˆ°Markdownæ¨¡å¼</div>
                </div>
                <div class="features">
                    <strong>æ£€æµ‹åˆ°çš„ç‰¹å¾:</strong>
                    <div id="featuresContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="workflow">
        <h3>ğŸ”„ ç™½æ¿åº”ç”¨ä¸­çš„å®é™…å·¥ä½œæµç¨‹</h3>
        <div class="step">
            <div class="step-number">1</div>
            <div>æ–°å»ºä¸€ä¸ªå¡ç‰‡ï¼ŒåŒå‡»è¿›å…¥ç¼–è¾‘æ¨¡å¼</div>
        </div>
        <div class="step">
            <div class="step-number">2</div>
            <div>å¤åˆ¶Markdownæ ¼å¼çš„æ–‡æœ¬ï¼ˆå¦‚ä¸Šæ–¹ç¤ºä¾‹ï¼‰</div>
        </div>
        <div class="step">
            <div class="step-number">3</div>
            <div>ç²˜è´´åˆ°å¡ç‰‡ä¸­ (Ctrl+V æˆ– Cmd+V)</div>
        </div>
        <div class="step">
            <div class="step-number">4</div>
            <div><strong>ğŸ¯ è‡ªåŠ¨æ£€æµ‹å¹¶åˆ‡æ¢</strong> - ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«Markdownæ ¼å¼å¹¶åˆ‡æ¢åˆ°Markdownæ¨¡å¼</div>
        </div>
        <div class="step">
            <div class="step-number">5</div>
            <div>å†…å®¹è‡ªåŠ¨æ¸²æŸ“ä¸ºæ ¼å¼åŒ–çš„Markdownæ˜¾ç¤º</div>
        </div>
    </div>

    <script>
        // è¿™é‡Œæ˜¯æˆ‘ä»¬åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨çš„Markdownæ£€æµ‹ç®—æ³•
        function detectMarkdown(text) {
            if (!text || text.length < 10) {
                return { isMarkdown: false, confidence: 0, features: [] };
            }

            let features = [];
            let score = 0;

            // æ ‡é¢˜æ£€æµ‹ (#, ##, ###)
            if (/^#{1,6}\s+.+$/m.test(text)) {
                features.push('æ ‡é¢˜');
                score += 1;
            }

            // ä»£ç å—æ£€æµ‹ (```, ~~~)
            if (/^```[\s\S]*?```/m.test(text) || /^~~~[\s\S]*?~~~/m.test(text)) {
                features.push('ä»£ç å—');
                score += 1;
            }

            // è¡Œå†…ä»£ç æ£€æµ‹ (`code`)
            if (/`[^`\n]+`/.test(text)) {
                features.push('è¡Œå†…ä»£ç ');
                score += 0.5;
            }

            // ç²—ä½“/æ–œä½“æ£€æµ‹ (**text**, *text*)
            if (/\*\*[^*\n]+\*\*/.test(text) || /__[^_\n]+__/.test(text)) {
                features.push('ç²—ä½“');
                score += 0.5;
            }
            if (/(?<!\*)\*[^*\n]+\*(?!\*)/.test(text) || /(?<!_)_[^_\n]+_(?!_)/.test(text)) {
                features.push('æ–œä½“');
                score += 0.5;
            }

            // é“¾æ¥æ£€æµ‹ ([text](url))
            if (/\[([^\]]+)\]\(([^)]+)\)/.test(text)) {
                features.push('é“¾æ¥');
                score += 1;
            }

            // å›¾ç‰‡æ£€æµ‹ (![alt](url))
            if (/!\[([^\]]*)\]\(([^)]+)\)/.test(text)) {
                features.push('å›¾ç‰‡');
                score += 1;
            }

            // æ— åºåˆ—è¡¨æ£€æµ‹ (-, *, +)
            if (/^[\s]*[-*+]\s+.+$/m.test(text)) {
                features.push('æ— åºåˆ—è¡¨');
                score += 1;
            }

            // æœ‰åºåˆ—è¡¨æ£€æµ‹ (1., 2.)
            if (/^[\s]*\d+\.\s+.+$/m.test(text)) {
                features.push('æœ‰åºåˆ—è¡¨');
                score += 1;
            }

            // å¼•ç”¨æ£€æµ‹ (> text)
            if (/^>\s+.+$/m.test(text)) {
                features.push('å¼•ç”¨');
                score += 0.5;
            }

            // è¡¨æ ¼æ£€æµ‹ (|col1|col2|)
            if (/\|.+\|/.test(text) && /\|[\s]*:?-+:?[\s]*\|/.test(text)) {
                features.push('è¡¨æ ¼');
                score += 1;
            }

            // åˆ é™¤çº¿æ£€æµ‹ (~~text~~)
            if (/~~[^~\n]+~~/.test(text)) {
                features.push('åˆ é™¤çº¿');
                score += 0.3;
            }

            // ä»»åŠ¡åˆ—è¡¨æ£€æµ‹ (- [ ], - [x])
            if (/^[\s]*-\s+\[[x\s]\]\s+.+$/m.test(text)) {
                features.push('ä»»åŠ¡åˆ—è¡¨');
                score += 0.5;
            }

            // æ°´å¹³çº¿æ£€æµ‹ (---, ***)
            if (/^[\s]*[-*_]{3,}[\s]*$/m.test(text)) {
                features.push('æ°´å¹³çº¿');
                score += 0.3;
            }

            // ç‰¹æ®Šå­—ç¬¦æŒ‡ç¤ºå™¨æ£€æµ‹
            const indicators = ['```', '***', '**', '![', '](', '- [ ]', '- [x]'];
            indicators.forEach(indicator => {
                if (text.includes(indicator)) {
                    score += 0.3;
                }
            });

            // ç©ºè¡Œåˆ†æ®µæ£€æµ‹
            if (/\n\s*\n/.test(text)) {
                features.push('æ®µè½åˆ†éš”');
                score += 0.2;
            }

            // ç¼©è¿›æ ¼å¼æ£€æµ‹
            if (/^\s{2,}.+$/m.test(text)) {
                features.push('ç¼©è¿›æ ¼å¼');
                score += 0.2;
            }

            // è®¡ç®—ç½®ä¿¡åº¦ (0-1)
            const confidence = Math.min(score / 5, 1);
            const isMarkdown = confidence > 0.3;

            return {
                isMarkdown,
                confidence,
                features
            };
        }

        function updateDetection() {
            const text = document.getElementById('testInput').value;
            const result = detectMarkdown(text);
            
            // æ›´æ–°çŠ¶æ€
            const statusEl = document.getElementById('detectionStatus');
            const confidenceTextEl = document.getElementById('confidenceText');
            const confidenceFillEl = document.getElementById('confidenceFill');
            const featuresEl = document.getElementById('featuresContainer');
            const autoSwitchEl = document.getElementById('autoSwitchIndicator');
            
            // è®¾ç½®çŠ¶æ€
            if (result.isMarkdown) {
                statusEl.className = 'status detected';
                statusEl.textContent = 'âœ… æ£€æµ‹åˆ°Markdownæ ¼å¼';
            } else {
                statusEl.className = 'status not-detected';
                statusEl.textContent = 'âŒ æœªæ£€æµ‹åˆ°Markdownæ ¼å¼';
            }
            
            // è®¾ç½®ç½®ä¿¡åº¦
            const percentage = Math.round(result.confidence * 100);
            confidenceTextEl.textContent = percentage + '%';
            confidenceFillEl.style.width = percentage + '%';
            
            // æ˜¾ç¤ºæ˜¯å¦ä¼šè‡ªåŠ¨åˆ‡æ¢
            if (result.confidence > 0.4) {
                autoSwitchEl.style.display = 'block';
            } else {
                autoSwitchEl.style.display = 'none';
            }
            
            // è®¾ç½®ç‰¹å¾
            featuresEl.innerHTML = '';
            if (result.features.length > 0) {
                result.features.forEach(feature => {
                    const tag = document.createElement('span');
                    tag.className = 'feature-tag';
                    tag.textContent = feature;
                    featuresEl.appendChild(tag);
                });
            } else {
                featuresEl.innerHTML = '<span style="color: #666;">æš‚æ— æ£€æµ‹åˆ°çš„ç‰¹å¾</span>';
            }
        }

        // ç¤ºä¾‹å†…å®¹
        const examples = {
            headers: `# è¿™æ˜¯ä¸€çº§æ ‡é¢˜
## è¿™æ˜¯äºŒçº§æ ‡é¢˜
### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜

è¿™æ˜¯ä¸€äº›æ™®é€šçš„æ®µè½æ–‡æœ¬ã€‚`,

            list: `## è´­ç‰©æ¸…å•

- è‹¹æœ
- é¦™è•‰
- æ©™å­

### å¾…åŠäº‹é¡¹

1. å®Œæˆé¡¹ç›®æŠ¥å‘Š
2. å‘é€é‚®ä»¶ç»™å®¢æˆ·
3. å‡†å¤‡æ˜å¤©çš„ä¼šè®®

- [ ] æœªå®Œæˆçš„ä»»åŠ¡
- [x] å·²å®Œæˆçš„ä»»åŠ¡`,

            code: `## ä»£ç ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªJavaScriptå‡½æ•°ï¼š

\`\`\`javascript
function greet(name) {
    console.log(\`Hello, \${name}!\`);
    return \`Hello, \${name}!\`;
}
\`\`\`

è¿˜æœ‰ä¸€äº›è¡Œå†…ä»£ç ï¼š\`console.log('Hello')\``,

            links: `## é“¾æ¥å’Œå›¾ç‰‡

è¿™æ˜¯ä¸€ä¸ª[é“¾æ¥åˆ°Google](https://google.com)ã€‚

è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼š
![ç¤ºä¾‹å›¾ç‰‡](https://via.placeholder.com/150)

**ç²—ä½“æ–‡æœ¬** å’Œ *æ–œä½“æ–‡æœ¬*`,

            table: `## æ•°æ®è¡¨æ ¼

| å§“å | å¹´é¾„ | èŒä¸š |
|------|------|------|
| å¼ ä¸‰ | 25   | å·¥ç¨‹å¸ˆ |
| æå›› | 30   | è®¾è®¡å¸ˆ |
| ç‹äº” | 28   | äº§å“ç»ç† |

> è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨æ–‡æœ¬ã€‚
> å¯ä»¥åŒ…å«å¤šè¡Œå†…å®¹ã€‚`,

            complex: `# ç»¼åˆç¤ºä¾‹æ–‡æ¡£

## ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŒ…å«**å¤šç§Markdownæ ¼å¼**çš„*ç»¼åˆç¤ºä¾‹*ã€‚

### ä»£ç å—
\`\`\`python
def hello_world():
    print("Hello, World!")
    return True
\`\`\`

### åˆ—è¡¨å’Œä»»åŠ¡
- é¡¹ç›®A
  - å­é¡¹ç›®A1
  - å­é¡¹ç›®A2
- é¡¹ç›®B

ä»»åŠ¡åˆ—è¡¨ï¼š
- [x] å®Œæˆè®¾è®¡
- [ ] å¼€å‘åŠŸèƒ½
- [ ] æµ‹è¯•éªŒè¯

### è¡¨æ ¼
| åŠŸèƒ½ | çŠ¶æ€ | è¿›åº¦ |
|------|------|------|
| ç™»å½• | âœ… å®Œæˆ | 100% |
| æ³¨å†Œ | ğŸ”„ è¿›è¡Œä¸­ | 80% |

### å…¶ä»–æ ¼å¼
> é‡è¦æç¤ºï¼šè¯·ä»”ç»†é˜…è¯»æ–‡æ¡£

åˆ é™¤çº¿ï¼š~~è¿™æ˜¯é”™è¯¯çš„ä¿¡æ¯~~

---

**ç»“è®º**ï¼šè¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„Markdownæ–‡æ¡£ã€‚`,

            plain: `è¿™æ˜¯ä¸€æ®µæ™®é€šçš„æ–‡æœ¬å†…å®¹ï¼Œæ²¡æœ‰ä»»ä½•ç‰¹æ®Šçš„æ ¼å¼ã€‚
åªæ˜¯ä¸€äº›æ­£å¸¸çš„å¥å­å’Œæ®µè½ã€‚
ä¸åŒ…å«ä»»ä½•Markdownç‰¹å®šçš„è¯­æ³•æ ‡è®°ã€‚

è¿™é‡Œæœ‰ä¸€äº›æ•°å­— 123 å’Œç¬¦å· !@#$%ï¼Œä½†å®ƒä»¬ä¸æ„æˆMarkdownæ ¼å¼ã€‚`
        };

        function setExample(type) {
            document.getElementById('testInput').value = examples[type];
            updateDetection();
        }

        // ç»‘å®šè¾“å…¥äº‹ä»¶
        document.getElementById('testInput').addEventListener('input', updateDetection);

        // åˆå§‹åŒ–
        updateDetection();
    </script>
</body>
</html> 