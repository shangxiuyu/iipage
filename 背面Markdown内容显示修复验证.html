<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èƒŒé¢Markdownå†…å®¹æ˜¾ç¤ºä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .issue-description {
            background: #fef2f2;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #ef4444;
            margin: 20px 0;
        }
        .solution {
            background: #f0fdf4;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #10b981;
            margin: 20px 0;
        }
        .test-steps {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
            margin: 20px 0;
        }
        .step {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        .step-number {
            display: inline-block;
            width: 24px;
            height: 24px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-weight: bold;
            margin-right: 10px;
        }
        .code-block {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .highlight {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: bold;
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .before, .after {
            padding: 15px;
            border-radius: 8px;
        }
        .before {
            background: #fef2f2;
            border: 1px solid #fecaca;
        }
        .after {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
        }
        .warning {
            background: #fffbeb;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”§ èƒŒé¢Markdownå†…å®¹æ˜¾ç¤ºä¿®å¤éªŒè¯</h1>
        <p>ä¿®å¤èƒŒé¢Markdownå¡ç‰‡é€€å‡ºç¼–è¾‘åä¸æ˜¾ç¤ºå†…å®¹çš„é—®é¢˜</p>
    </div>

    <div class="issue-description">
        <h2>ğŸ› é—®é¢˜æè¿°</h2>
        <p>ç”¨æˆ·åæ˜ ï¼š<strong>åœ¨Markdownå¡ç‰‡ç¿»è½¬åˆ°èƒŒé¢åï¼Œè¾“å…¥æ–‡å­—é€€å‡ºç¼–è¾‘ä¸æ˜¾ç¤ºï¼Œä½†æ­£å¸¸çš„å¯Œæ–‡æœ¬æ˜¯æ²¡é—®é¢˜çš„</strong></p>
        <ul>
            <li>âœ… æ­£é¢Markdownï¼šç¼–è¾‘å’Œæ˜¾ç¤ºæ­£å¸¸</li>
            <li>âœ… æ­£é¢å¯Œæ–‡æœ¬ï¼šç¼–è¾‘å’Œæ˜¾ç¤ºæ­£å¸¸</li>
            <li>âœ… èƒŒé¢å¯Œæ–‡æœ¬ï¼šç¼–è¾‘å’Œæ˜¾ç¤ºæ­£å¸¸</li>
            <li><span class="highlight">âŒ èƒŒé¢Markdownï¼šç¼–è¾‘æ­£å¸¸ä½†é€€å‡ºåä¸æ˜¾ç¤º</span></li>
        </ul>
    </div>

    <div class="solution">
        <h2>ğŸ” æ ¹æœ¬åŸå› åˆ†æ</h2>
        <p>é€šè¿‡ä»£ç åˆ†æå‘ç°é—®é¢˜åœ¨äºæ˜¾ç¤ºé€»è¾‘ä¸­çŠ¶æ€å¼•ç”¨é”™è¯¯ï¼š</p>
        
        <div class="before-after">
            <div class="before">
                <h3>âŒ ä¿®å¤å‰</h3>
                <p><strong>é—®é¢˜ä»£ç ï¼š</strong></p>
                <div class="code-block">
// éç¼–è¾‘çŠ¶æ€ä¸‹çš„æ˜¾ç¤ºé€»è¾‘
backEditMode === 'markdown' && node.backMarkdownContent ? (
  // æ¸²æŸ“Markdownå†…å®¹
) : (
  // æ¸²æŸ“å¯Œæ–‡æœ¬å†…å®¹
)
                </div>
                <p><strong>é—®é¢˜ï¼š</strong>ä½¿ç”¨äº†æœ¬åœ°çŠ¶æ€ <code>backEditMode</code>ï¼Œä½†åœ¨éç¼–è¾‘çŠ¶æ€ä¸‹ï¼Œæœ¬åœ°çŠ¶æ€å¯èƒ½ä¸å­˜å‚¨çŠ¶æ€ä¸åŒæ­¥</p>
            </div>
            <div class="after">
                <h3>âœ… ä¿®å¤å</h3>
                <p><strong>ä¿®å¤ä»£ç ï¼š</strong></p>
                <div class="code-block">
// éç¼–è¾‘çŠ¶æ€ä¸‹çš„æ˜¾ç¤ºé€»è¾‘
node.backEditMode === 'markdown' && node.backMarkdownContent ? (
  // æ¸²æŸ“Markdownå†…å®¹
) : (
  // æ¸²æŸ“å¯Œæ–‡æœ¬å†…å®¹
)
                </div>
                <p><strong>è§£å†³ï¼š</strong>ä½¿ç”¨å­˜å‚¨çŠ¶æ€ <code>node.backEditMode</code>ï¼Œç¡®ä¿ä¸å®é™…ä¿å­˜çš„æ¨¡å¼ä¸€è‡´</p>
            </div>
        </div>
    </div>

    <div class="solution">
        <h2>ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚</h2>
        
        <h3>çŠ¶æ€ç®¡ç†è¯´æ˜ï¼š</h3>
        <ul>
            <li><strong>ç¼–è¾‘çŠ¶æ€</strong>ï¼šä½¿ç”¨æœ¬åœ°çŠ¶æ€ <code>backEditMode</code> æ§åˆ¶ç¼–è¾‘å™¨æ˜¾ç¤º</li>
            <li><strong>æ˜¾ç¤ºçŠ¶æ€</strong>ï¼šä½¿ç”¨å­˜å‚¨çŠ¶æ€ <code>node.backEditMode</code> æ§åˆ¶å†…å®¹æ¸²æŸ“</li>
            <li><strong>ä¿å­˜é€»è¾‘</strong>ï¼š<code>finishEdit()</code> å‡½æ•°è´Ÿè´£å°†æœ¬åœ°çŠ¶æ€åŒæ­¥åˆ°å­˜å‚¨</li>
        </ul>

        <h3>ä¿®å¤çš„å…³é”®ä»£ç ï¼š</h3>
        <div class="code-block">
// finishEdit å‡½æ•°ä¸­çš„ä¿å­˜é€»è¾‘ï¼ˆè¿™éƒ¨åˆ†æ˜¯æ­£ç¡®çš„ï¼‰
if (node.isFlipped) {
  if (backEditMode === 'markdown') {
    updateNode(node.id, {
      backMarkdownContent: localBackMarkdown,
      backEditMode: 'markdown',  // ä¿å­˜åˆ°å­˜å‚¨
    });
  }
}

// æ˜¾ç¤ºé€»è¾‘ï¼ˆå·²ä¿®å¤ï¼‰
{!node.editing && (
  node.backEditMode === 'markdown' && node.backMarkdownContent ? (
    // ä½¿ç”¨å­˜å‚¨çŠ¶æ€åˆ¤æ–­ï¼Œç¡®ä¿æ˜¾ç¤ºæ­£ç¡®
    &lt;ReactMarkdown&gt;{node.backMarkdownContent}&lt;/ReactMarkdown&gt;
  ) : (
    // å¯Œæ–‡æœ¬æ˜¾ç¤º
  )
)}
        </div>
    </div>

    <div class="test-steps">
        <h2>ğŸ§ª æµ‹è¯•æ­¥éª¤</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>åˆ›å»ºæ–°å¡ç‰‡</strong>
            <p>åœ¨ç™½æ¿åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¡ç‰‡</p>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>ç¿»è½¬åˆ°èƒŒé¢</strong>
            <p>ç‚¹å‡»å¡ç‰‡å³ä¸Šè§’çš„ç¿»è½¬æŒ‰é’®ï¼Œåˆ‡æ¢åˆ°èƒŒé¢</p>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>è¿›å…¥ç¼–è¾‘æ¨¡å¼</strong>
            <p>åŒå‡»èƒŒé¢å¡ç‰‡è¿›å…¥ç¼–è¾‘æ¨¡å¼</p>
        </div>

        <div class="step">
            <span class="step-number">4</span>
            <strong>åˆ‡æ¢åˆ°Markdownæ¨¡å¼</strong>
            <p>ç‚¹å‡»å³ä¸Šè§’çš„"RT"æŒ‰é’®ï¼Œåˆ‡æ¢åˆ°"MD"æ¨¡å¼</p>
        </div>

        <div class="step">
            <span class="step-number">5</span>
            <strong>è¾“å…¥Markdownå†…å®¹</strong>
            <p>åœ¨textareaä¸­è¾“å…¥ä¸€äº›Markdownæ ¼å¼çš„æ–‡æœ¬ï¼š</p>
            <div class="code-block">
# èƒŒé¢æµ‹è¯•æ ‡é¢˜

è¿™æ˜¯èƒŒé¢çš„ **Markdown** å†…å®¹æµ‹è¯•ã€‚

## åŠŸèƒ½éªŒè¯
- [x] ç¼–è¾‘åŠŸèƒ½æ­£å¸¸
- [x] ä¿å­˜åŠŸèƒ½æ­£å¸¸  
- [x] æ˜¾ç¤ºåŠŸèƒ½æ­£å¸¸

```javascript
console.log('èƒŒé¢Markdownæ¸²æŸ“æˆåŠŸï¼');
```

> è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨å—ï¼Œç”¨äºæµ‹è¯•Markdownæ¸²æŸ“ã€‚
            </div>
        </div>

        <div class="step">
            <span class="step-number">6</span>
            <strong>ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘</strong>
            <p>ç‚¹å‡»ç»¿è‰²çš„"âœ“"ä¿å­˜æŒ‰é’®ï¼Œæˆ–è€…ç‚¹å‡»å¡ç‰‡å¤–éƒ¨é€€å‡ºç¼–è¾‘æ¨¡å¼</p>
        </div>

        <div class="step">
            <span class="step-number">7</span>
            <strong>éªŒè¯æ˜¾ç¤ºæ•ˆæœ</strong>
            <p>ç¡®è®¤ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
            <ul>
                <li>âœ… èƒŒé¢å¡ç‰‡æ˜¾ç¤ºMarkdownæ¸²æŸ“åçš„å†…å®¹</li>
                <li>âœ… æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç å—ç­‰æ ¼å¼æ­£ç¡®æ˜¾ç¤º</li>
                <li>âœ… å†…å®¹ä¸æ˜¯ç©ºç™½æˆ–æ¶ˆå¤±</li>
                <li>âœ… å¯ä»¥æ­£å¸¸æ»šåŠ¨æŸ¥çœ‹é•¿å†…å®¹</li>
            </ul>
        </div>

        <div class="step">
            <span class="step-number">8</span>
            <strong>é‡å¤ç¼–è¾‘æµ‹è¯•</strong>
            <p>å†æ¬¡åŒå‡»è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œä¿®æ”¹å†…å®¹ï¼Œé€€å‡ºåéªŒè¯æ›´æ–°æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</p>
        </div>

        <div class="step">
            <span class="step-number">9</span>
            <strong>æ¨¡å¼åˆ‡æ¢æµ‹è¯•</strong>
            <p>åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹åˆ‡æ¢RTâ†”MDæ¨¡å¼ï¼ŒéªŒè¯å†…å®¹è½¬æ¢å’Œæ˜¾ç¤ºæ˜¯å¦æ­£å¸¸</p>
        </div>
    </div>

    <div class="warning">
        <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
        <ul>
            <li>ç¡®ä¿åœ¨Markdownæ¨¡å¼ä¸‹è¾“å…¥å†…å®¹åç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼ˆç»¿è‰²âœ“ï¼‰</li>
            <li>å¦‚æœä»ç„¶ä¸æ˜¾ç¤ºï¼Œæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯</li>
            <li>æµ‹è¯•æ—¶å¯ä»¥å¯¹æ¯”æ­£é¢Markdownå’ŒèƒŒé¢å¯Œæ–‡æœ¬çš„æ­£å¸¸è¡Œä¸º</li>
        </ul>
    </div>

    <div class="solution">
        <h2>ğŸ“‹ ä¿®å¤æ€»ç»“</h2>
        <ul>
            <li><strong>é—®é¢˜æ ¹æº</strong>ï¼šæ˜¾ç¤ºé€»è¾‘ä½¿ç”¨äº†é”™è¯¯çš„çŠ¶æ€å¼•ç”¨</li>
            <li><strong>ä¿®å¤æ–¹æ¡ˆ</strong>ï¼šå°†æ˜¾ç¤ºæ¡ä»¶ä»æœ¬åœ°çŠ¶æ€æ”¹ä¸ºå­˜å‚¨çŠ¶æ€</li>
            <li><strong>å½±å“èŒƒå›´</strong>ï¼šä»…å½±å“èƒŒé¢Markdownå†…å®¹çš„æ˜¾ç¤ºé€»è¾‘</li>
            <li><strong>å…¼å®¹æ€§</strong>ï¼šä¸å½±å“å…¶ä»–åŠŸèƒ½ï¼Œå®Œå…¨å‘åå…¼å®¹</li>
        </ul>
        
        <h3>ä¿®å¤å‰åå¯¹æ¯”ï¼š</h3>
        <div class="code-block">
// ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰
backEditMode === 'markdown' && node.backMarkdownContent

// ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰
node.backEditMode === 'markdown' && node.backMarkdownContent
        </div>
    </div>

    <div style="text-align: center; margin-top: 40px; padding: 20px; background: #f0f9ff; border-radius: 8px;">
        <h3>ğŸ‰ ä¿®å¤å®Œæˆï¼</h3>
        <p>èƒŒé¢Markdownå¡ç‰‡ç°åœ¨å¯ä»¥æ­£ç¡®æ˜¾ç¤ºå†…å®¹äº†</p>
        <p><strong>è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤åœ¨ç™½æ¿åº”ç”¨ä¸­æµ‹è¯•éªŒè¯</strong></p>
    </div>
</body>
</html> 