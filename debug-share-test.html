<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™½æ¿åˆ†äº«åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            border: 1px solid #ddd;
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
        }
        .success { border-color: #4CAF50; background-color: #f9fff9; }
        .error { border-color: #f44336; background-color: #fff9f9; }
        .warning { border-color: #ff9800; background-color: #fff8f0; }
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #005a8b; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; overflow-x: auto; }
        .loading { display: none; }
    </style>
</head>
<body>
    <h1>ğŸ–¼ï¸ ç™½æ¿åˆ†äº«åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“‹ æµ‹è¯•è¯´æ˜</h2>
        <p>æ­¤é¡µé¢ç”¨äºè¯Šæ–­ç™½æ¿åˆ†äº«åå…¶ä»–ç”¨æˆ·æ— æ³•çœ‹åˆ°çš„é—®é¢˜ã€‚</p>
        <ul>
            <li>æ£€æŸ¥ç½‘ç»œè¿æ¥</li>
            <li>éªŒè¯èµ„æºåŠ è½½</li>
            <li>æµ‹è¯•æ¨¡å—å¯¼å…¥</li>
            <li>æ£€æŸ¥æ§åˆ¶å°é”™è¯¯</li>
        </ul>
    </div>

    <div class="test-section" id="network-test">
        <h2>ğŸŒ ç½‘ç»œè¿æ¥æµ‹è¯•</h2>
        <button onclick="testNetworkConnection()">å¼€å§‹ç½‘ç»œæµ‹è¯•</button>
        <div id="network-result"></div>
    </div>

    <div class="test-section" id="resource-test">
        <h2>ğŸ“¦ èµ„æºåŠ è½½æµ‹è¯•</h2>
        <button onclick="testResourceLoading()">æµ‹è¯•èµ„æºåŠ è½½</button>
        <div id="resource-result"></div>
    </div>

    <div class="test-section" id="module-test">
        <h2>ğŸ”§ æ¨¡å—å¯¼å…¥æµ‹è¯•</h2>
        <button onclick="testModuleImport()">æµ‹è¯•æ¨¡å—å¯¼å…¥</button>
        <div id="module-result"></div>
    </div>

    <div class="test-section" id="console-test">
        <h2>ğŸ› æ§åˆ¶å°é”™è¯¯ç›‘æ§</h2>
        <button onclick="startErrorMonitoring()">å¼€å§‹ç›‘æ§</button>
        <div id="console-result"></div>
    </div>

    <script>
        // é”™è¯¯æ”¶é›†å™¨
        const errors = [];
        
        // ç›‘å¬æ‰€æœ‰é”™è¯¯
        window.addEventListener('error', function(e) {
            errors.push({
                type: 'script-error',
                message: e.message,
                filename: e.filename,
                lineno: e.lineno,
                colno: e.colno,
                error: e.error
            });
            updateConsoleResult();
        });

        window.addEventListener('unhandledrejection', function(e) {
            errors.push({
                type: 'promise-rejection',
                reason: e.reason,
                promise: e.promise
            });
            updateConsoleResult();
        });

        function testNetworkConnection() {
            const result = document.getElementById('network-result');
            result.innerHTML = '<div class="loading">ğŸ”„ æ­£åœ¨æµ‹è¯•ç½‘ç»œè¿æ¥...</div>';
            
            // æµ‹è¯•åŸºæœ¬è¿æ¥
            Promise.all([
                fetch('/').then(r => ({ url: '/', status: r.status, ok: r.ok })),
                fetch('/assets/').then(r => ({ url: '/assets/', status: r.status, ok: r.ok })).catch(e => ({ url: '/assets/', error: e.message })),
                fetch('https://jsonplaceholder.typicode.com/posts/1').then(r => ({ url: 'å¤–éƒ¨API', status: r.status, ok: r.ok })).catch(e => ({ url: 'å¤–éƒ¨API', error: e.message }))
            ]).then(results => {
                const html = results.map(r => 
                    `<div class="${r.error || !r.ok ? 'error' : 'success'}">
                        ${r.url}: ${r.error || (r.ok ? 'âœ… æ­£å¸¸' : `âŒ é”™è¯¯ ${r.status}`)}
                    </div>`
                ).join('');
                result.innerHTML = html;
            }).catch(e => {
                result.innerHTML = `<div class="error">âŒ ç½‘ç»œæµ‹è¯•å¤±è´¥: ${e.message}</div>`;
            });
        }

        function testResourceLoading() {
            const result = document.getElementById('resource-result');
            result.innerHTML = '<div class="loading">ğŸ”„ æ­£åœ¨æµ‹è¯•èµ„æºåŠ è½½...</div>';
            
            // å°è¯•åŠ è½½å¸¸è§çš„èµ„æº
            const testResources = [
                '/assets/index.css',
                '/assets/index.js', 
                '/vite.svg',
                '/favicon.ico'
            ];
            
            Promise.all(testResources.map(url => 
                fetch(url).then(r => ({
                    url,
                    status: r.status,
                    ok: r.ok,
                    contentType: r.headers.get('content-type')
                })).catch(e => ({
                    url,
                    error: e.message
                }))
            )).then(results => {
                const html = results.map(r => 
                    `<div class="${r.error || !r.ok ? 'error' : 'success'}">
                        ${r.url}: ${r.error || (r.ok ? `âœ… ${r.contentType || 'æœªçŸ¥ç±»å‹'}` : `âŒ ${r.status}`)}
                    </div>`
                ).join('');
                result.innerHTML = html;
            });
        }

        function testModuleImport() {
            const result = document.getElementById('module-result');
            result.innerHTML = '<div class="loading">ğŸ”„ æ­£åœ¨æµ‹è¯•æ¨¡å—å¯¼å…¥...</div>';
            
            // æµ‹è¯•åŠ¨æ€å¯¼å…¥
            const tests = [];
            
            // æµ‹è¯• ES6 æ¨¡å—å¯¼å…¥
            try {
                const script = document.createElement('script');
                script.type = 'module';
                script.innerHTML = `
                    try {
                        import('/assets/index.js').then(() => {
                            window.moduleTestResult = { success: true };
                        }).catch(e => {
                            window.moduleTestResult = { error: e.message };
                        });
                    } catch(e) {
                        window.moduleTestResult = { error: e.message };
                    }
                `;
                document.head.appendChild(script);
                
                setTimeout(() => {
                    const testResult = window.moduleTestResult || { error: 'è¶…æ—¶' };
                    const html = testResult.success ? 
                        '<div class="success">âœ… ES6 æ¨¡å—å¯¼å…¥æ­£å¸¸</div>' :
                        `<div class="error">âŒ ES6 æ¨¡å—å¯¼å…¥å¤±è´¥: ${testResult.error}</div>`;
                    
                    result.innerHTML = html;
                }, 2000);
                
            } catch(e) {
                result.innerHTML = `<div class="error">âŒ æ¨¡å—æµ‹è¯•å¤±è´¥: ${e.message}</div>`;
            }
        }

        function startErrorMonitoring() {
            const result = document.getElementById('console-result');
            result.innerHTML = '<div class="warning">ğŸ” å¼€å§‹ç›‘æ§æ§åˆ¶å°é”™è¯¯...</div>';
            updateConsoleResult();
        }

        function updateConsoleResult() {
            const result = document.getElementById('console-result');
            if (errors.length === 0) {
                result.innerHTML = '<div class="success">âœ… æš‚æ— é”™è¯¯</div>';
            } else {
                const html = errors.map((err, index) => 
                    `<div class="error">
                        <strong>é”™è¯¯ ${index + 1} (${err.type}):</strong><br>
                        <pre>${JSON.stringify(err, null, 2)}</pre>
                    </div>`
                ).join('');
                result.innerHTML = html;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨å¼€å§‹ç›‘æ§
        document.addEventListener('DOMContentLoaded', function() {
            startErrorMonitoring();
            
            // è‡ªåŠ¨è¿è¡Œç½‘ç»œæµ‹è¯•
            setTimeout(() => {
                testNetworkConnection();
            }, 1000);
        });

        // æ·»åŠ ä¸€äº›æœ‰ç”¨çš„è°ƒè¯•ä¿¡æ¯
        console.log('ğŸ”§ è°ƒè¯•ä¿¡æ¯:');
        console.log('User Agent:', navigator.userAgent);
        console.log('Location:', window.location.href);
        console.log('Referrer:', document.referrer);
        console.log('Cookie æ”¯æŒ:', navigator.cookieEnabled);
        console.log('åœ¨çº¿çŠ¶æ€:', navigator.onLine);
    </script>
</body>
</html> 