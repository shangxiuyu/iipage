# 🗂️ 白板应用使用指南

## 📋 数据持久化功能使用指南

### 🎯 功能概述

你的白板应用现在具备了完整的数据持久化功能，可以：

1. **自动保存** 📱 - 每次修改后1秒自动保存到浏览器本地存储
2. **文件备份** 💾 - 手动下载JSON备份文件
3. **数据恢复** 🔄 - 从文件或本地备份恢复数据
4. **跨会话保持** 🔒 - 关闭浏览器后重新打开，数据依然存在

### 🚀 如何使用

#### 1. 自动保存（默认启用）

✅ **无需任何操作！** 系统已自动启用：

- 创建卡片 → 自动保存
- 编辑内容 → 自动保存
- 拖拽移动 → 自动保存
- 修改颜色 → 自动保存
- 创建连线 → 自动保存

**提示：** 你会在浏览器控制台看到 `💾 自动保存完成` 日志

#### 2. 访问数据管理面板

1. 点击右上角的 **💾 数据管理** 按钮
2. 弹出数据管理界面，包含三个标签页：
   - **💾 保存** - 查看数据统计和手动备份
   - **📂 加载** - 从文件或备份恢复数据
   - **⚙️ 设置** - 查看存储信息和危险操作

#### 3. 手动备份数据

**方法一：通过数据管理面板**
1. 点击 **💾 数据管理** 按钮
2. 在 **保存** 标签页中查看当前数据统计
3. 点击 **💾 下载白板文件** 按钮
4. 浏览器会自动下载 `.json` 备份文件

**备份文件内容：**
```json
{
  "nodes": [
    {
      "id": "1703123456789",
      "x": 200,
      "y": 150,
      "frontContent": [{"type": "paragraph", "children": [{"text": "卡片内容"}]}],
      "backContent": [{"type": "paragraph", "children": [{"text": "背面内容"}]}],
      "backgroundColor": "yellow",
      "isFlipped": false,
      "isCodeMode": false
    }
  ],
  "connections": [
    {
      "from": "1703123456789",
      "to": "1703123456790",
      "fromAnchor": "right",
      "toAnchor": "left"
    }
  ]
}
```

#### 4. 恢复数据

**方法一：从JSON文件恢复**
1. 打开 **数据管理** → **📂 加载** 标签页
2. 点击 **📂 选择 JSON 文件** 按钮
3. 选择之前下载的备份文件
4. 系统自动验证和加载数据
5. 成功后显示 ✅ 数据加载成功

**方法二：从本地备份恢复**
1. 打开 **数据管理** → **📂 加载** 标签页  
2. 点击 **🔄 恢复最近备份** 按钮
3. 系统从本地存储恢复数据

#### 5. 查看存储信息

在 **数据管理** → **⚙️ 设置** 标签页中可以查看：

- 📊 存储信息
  - 自动保存：开启（1秒延迟）
  - 存储位置：浏览器本地存储
  - 数据版本：v1
  - 支持格式：JSON

- 📈 实时统计
  - 卡片数量
  - 连接数量  
  - 数据大小
  - 最后保存时间

#### 6. 清空白板（危险操作）

⚠️ **谨慎使用！**

1. 打开 **数据管理** → **⚙️ 设置** 标签页
2. 点击 **🗑️ 清空白板** 按钮
3. 确认对话框中点击确定
4. 所有卡片和连线将被永久删除

### 💡 最佳实践

#### 定期备份
- 重要项目请定期下载JSON备份文件
- 建议在重大修改前先备份
- 可以创建多个版本的备份文件

#### 数据安全
- 本地存储：数据保存在你的浏览器中，安全私密
- 清除缓存：清除浏览器数据会删除自动保存的内容
- 隐私模式：隐私浏览模式下的数据不会持久保存

#### 文件管理
- 备份文件命名建议：`whiteboard-backup-2024-01-15.json`
- 可以在不同设备间通过JSON文件同步数据
- JSON文件可以用文本编辑器查看和编辑

### 🔧 故障排除

#### 自动保存不工作
1. 检查浏览器控制台是否有错误信息
2. 确认浏览器允许localStorage
3. 检查是否在隐私模式下浏览

#### 文件导入失败
1. 确认文件是有效的JSON格式
2. 检查文件是否包含 `nodes` 数组
3. 文件大小不要过大（建议<10MB）

#### 数据恢复失败
1. 尝试清空白板后重新导入
2. 检查备份文件的完整性
3. 尝试手动编辑JSON文件修复错误

### 🆕 高级功能（未来扩展）

目前已实现的功能完全满足日常使用需求。如需更高级功能，可以考虑：

1. **云端同步** - 多设备数据同步
2. **版本历史** - 查看和恢复历史版本
3. **协作功能** - 多人实时编辑
4. **数据分析** - 使用统计和性能监控

### 📞 技术支持

如遇到问题：
1. 查看浏览器控制台错误信息
2. 参考 `DATA_PERSISTENCE_GUIDE.md` 技术文档
3. 检查网络连接和浏览器兼容性

---

**恭喜！** 🎉 你的白板应用现在具备了企业级的数据持久化能力，再也不用担心数据丢失了！ 