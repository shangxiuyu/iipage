<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ é™¤åŠŸèƒ½è°ƒè¯•éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2d3748;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
            font-weight: 700;
        }

        .debug-section {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #ffc107;
        }

        .test-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #2196f3;
        }

        h2 {
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .icon {
            font-size: 1.3em;
        }

        .step {
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border-left: 4px solid #3f51b5;
        }

        .step-number {
            background: #3f51b5;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .button.success {
            background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);
        }

        .button.warning {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
        }

        .button.danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        }

        .log-area {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            max-height: 400px;
            overflow-y: auto;
            margin: 15px 0;
            border: 1px solid #4a5568;
        }

        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .highlight {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #9c27b0;
            margin: 15px 0;
        }

        .checklist {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }

        .checklist ul {
            margin: 0;
            padding-left: 20px;
        }

        .checklist li {
            margin: 8px 0;
        }

        .checkbox {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ› åˆ é™¤åŠŸèƒ½è°ƒè¯•éªŒè¯</h1>

        <div class="debug-section">
            <h2><span class="icon">ğŸ”</span> é—®é¢˜è¯Šæ–­æ£€æŸ¥å•</h2>
            <div class="checklist">
                <h3>è¯·é€é¡¹æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š</h3>
                <ul>
                    <li><input type="checkbox" class="checkbox" id="check1"> ç™½æ¿åº”ç”¨æ­£åœ¨è¿è¡Œ (http://localhost:5175/)</li>
                    <li><input type="checkbox" class="checkbox" id="check2"> æµè§ˆå™¨æ§åˆ¶å°å·²æ‰“å¼€ (F12 â†’ Console)</li>
                    <li><input type="checkbox" class="checkbox" id="check3"> æ§åˆ¶å°æ²¡æœ‰JavaScripté”™è¯¯</li>
                    <li><input type="checkbox" class="checkbox" id="check4"> æ’å…¥çš„æ˜¯äº‘ç«¯å›¾ç‰‡/è§†é¢‘ (URLåŒ…å«.aliyuncs.com)</li>
                    <li><input type="checkbox" class="checkbox" id="check5"> åˆ é™¤æ“ä½œç¡®å®æ”¹å˜äº†ç¼–è¾‘å™¨å†…å®¹</li>
                    <li><input type="checkbox" class="checkbox" id="check6"> ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„åˆ é™¤æ–¹å¼ (é€‰ä¸­â†’Delete/Backspace)</li>
                </ul>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="button success" onclick="openWhiteboard()">ğŸš€ æ‰“å¼€ç™½æ¿åº”ç”¨</button>
                <button class="button warning" onclick="showInstructions()">ğŸ“‹ è¯¦ç»†è¯´æ˜</button>
            </div>
        </div>

        <div class="test-section">
            <h2><span class="icon">ğŸ§ª</span> å¿«é€Ÿæµ‹è¯•æ­¥éª¤</h2>
            
            <div class="step">
                <div style="display: flex; align-items: flex-start;">
                    <span class="step-number">1</span>
                    <div class="step-content">
                        <div style="font-weight: 600; margin-bottom: 8px;">ç¡®è®¤åŸºç¡€åŠŸèƒ½</div>
                        <div>åœ¨æ§åˆ¶å°æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œç¡®ä¿æ—¥å¿—æ­£å¸¸å·¥ä½œï¼š</div>
                        <div class="log-area" style="margin-top: 10px;">
console.log('ğŸ¯ æµ‹è¯•åˆ é™¤æ£€æµ‹åŠŸèƒ½');
console.log('   ğŸ“„ æ–‡ä»¶ç±»å‹: å›¾ç‰‡');
console.log('   ğŸ”— æ–‡ä»¶URL: https://example.com/test.jpg');
console.log('   ğŸ“… åˆ é™¤æ—¶é—´: ' + new Date().toLocaleString());
                        </div>
                        <button class="button" onclick="testBasicLog()">â–¶ï¸ æ‰§è¡ŒåŸºç¡€æ—¥å¿—æµ‹è¯•</button>
                    </div>
                </div>
            </div>

            <div class="step">
                <div style="display: flex; align-items: flex-start;">
                    <span class="step-number">2</span>
                    <div class="step-content">
                        <div style="font-weight: 600; margin-bottom: 8px;">æ£€æŸ¥å›¾ç‰‡ç±»å‹</div>
                        <div>æ’å…¥ä»»æ„å†…å®¹åˆ°ç™½æ¿ï¼Œç„¶ååˆ é™¤ï¼Œè§‚å¯Ÿæ˜¯å¦æœ‰ä»»ä½•console.logè¾“å‡º</div>
                        <div class="highlight">
                            <strong>é‡è¦ï¼š</strong>åˆ é™¤æ£€æµ‹åŸºäºç¼–è¾‘å™¨å†…å®¹å˜åŒ–ï¼Œå¦‚æœç¼–è¾‘å™¨æ²¡æœ‰æ­£ç¡®è°ƒç”¨handleChangeï¼Œå°±ä¸ä¼šæœ‰æ—¥å¿—
                        </div>
                    </div>
                </div>
            </div>

            <div class="step">
                <div style="display: flex; align-items: flex-start;">
                    <span class="step-number">3</span>
                    <div class="step-content">
                        <div style="font-weight: 600; margin-bottom: 8px;">æ­£ç¡®çš„åˆ é™¤æ–¹å¼</div>
                        <div>ç¡®ä¿æ’å…¥çš„æ˜¯äº‘ç«¯æ–‡ä»¶ï¼Œä¸æ˜¯æœ¬åœ°base64æ–‡ä»¶ï¼š</div>
                        <ul>
                            <li>âœ… äº‘ç«¯æ–‡ä»¶URLï¼šhttps://xxx.oss-cn-beijing.aliyuncs.com/images/xxx.jpg</li>
                            <li>âŒ æœ¬åœ°æ–‡ä»¶URLï¼šdata:image/jpeg;base64,/9j/4AAQ...</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="debug-section">
            <h2><span class="icon">âš ï¸</span> å¸¸è§é—®é¢˜</h2>
            
            <div class="step">
                <div style="font-weight: 600; margin-bottom: 8px;">é—®é¢˜1ï¼šå®Œå…¨æ²¡æœ‰æ—¥å¿—</div>
                <div>
                    <strong>å¯èƒ½åŸå› ï¼š</strong>
                    <ul>
                        <li>JavaScripté”™è¯¯é˜»æ­¢äº†å‡½æ•°æ‰§è¡Œ</li>
                        <li>æµè§ˆå™¨æ§åˆ¶å°è¢«è¿‡æ»¤æˆ–æ¸…ç©º</li>
                        <li>ä»£ç çƒ­é‡è½½æ²¡æœ‰ç”Ÿæ•ˆ</li>
                    </ul>
                    <strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
                    <ul>
                        <li>åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½</li>
                        <li>æ£€æŸ¥æ§åˆ¶å°è¿‡æ»¤è®¾ç½®</li>
                        <li>æŸ¥çœ‹Networkæ ‡ç­¾ç¡®è®¤HMRæ›´æ–°</li>
                    </ul>
                </div>
            </div>

            <div class="step">
                <div style="font-weight: 600; margin-bottom: 8px;">é—®é¢˜2ï¼šæœ‰æ£€æµ‹æ—¥å¿—ä½†æ²¡æœ‰åˆ é™¤æ—¥å¿—</div>
                <div>
                    <strong>å¯èƒ½åŸå› ï¼š</strong>
                    <ul>
                        <li>åˆ é™¤çš„æ˜¯æœ¬åœ°base64æ–‡ä»¶ï¼Œä¸æ˜¯äº‘ç«¯æ–‡ä»¶</li>
                        <li>URLæ ¼å¼ä¸åŒ¹é….aliyuncs.com</li>
                        <li>é˜¿é‡Œäº‘OSSæœåŠ¡æœªåˆå§‹åŒ–</li>
                    </ul>
                    <strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
                    <ul>
                        <li>ç¡®è®¤æ’å…¥çš„æ˜¯äº‘ç«¯ä¸Šä¼ çš„æ–‡ä»¶</li>
                        <li>æ£€æŸ¥.env.localé…ç½®</li>
                        <li>é‡æ–°ä¸Šä¼ æ–‡ä»¶åˆ°äº‘ç«¯</li>
                    </ul>
                </div>
            </div>

            <div class="step">
                <div style="font-weight: 600; margin-bottom: 8px;">é—®é¢˜3ï¼šåˆ é™¤æ²¡æœ‰è§¦å‘</div>
                <div>
                    <strong>å¯èƒ½åŸå› ï¼š</strong>
                    <ul>
                        <li>åˆ é™¤æ“ä½œæ²¡æœ‰æ”¹å˜ç¼–è¾‘å™¨å†…å®¹</li>
                        <li>å›¾ç‰‡/è§†é¢‘å·²ç»æ˜¯ç©ºçŠ¶æ€</li>
                        <li>Reactç»„ä»¶çŠ¶æ€æ›´æ–°é—®é¢˜</li>
                    </ul>
                    <strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
                    <ul>
                        <li>ç¡®ä¿å…ˆæ’å…¥ï¼Œååˆ é™¤</li>
                        <li>é€‰ä¸­æ•´ä¸ªå›¾ç‰‡/è§†é¢‘å…ƒç´ å†åˆ é™¤</li>
                        <li>å°è¯•å‰ªåˆ‡(Ctrl+X)æ“ä½œ</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2><span class="icon">ğŸ”§</span> å®æ—¶è°ƒè¯•å·¥å…·</h2>
            
            <div class="highlight">
                <div style="font-weight: 600; margin-bottom: 10px;">å®æ—¶æ—¥å¿—ç›‘æ§</div>
                <div>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å¼€å§‹ç›‘æ§ç™½æ¿åº”ç”¨çš„æ§åˆ¶å°æ—¥å¿—ï¼š</div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="button success" onclick="startLogMonitoring()">ğŸ” å¼€å§‹æ—¥å¿—ç›‘æ§</button>
                <button class="button warning" onclick="clearDebugLog()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
                <button class="button danger" onclick="stopLogMonitoring()">â¹ï¸ åœæ­¢ç›‘æ§</button>
            </div>

            <div class="log-area" id="debugLog">
ç­‰å¾…æ—¥å¿—è¾“å‡º...
            </div>

            <div id="monitorStatus"></div>
        </div>

        <div class="debug-section">
            <h2><span class="icon">ğŸ“ˆ</span> è°ƒè¯•ç»“æœåˆ†æ</h2>
            
            <div class="step">
                <div style="font-weight: 600; margin-bottom: 8px;">æœŸæœ›çš„æ­£å¸¸æ—¥å¿—è¾“å‡ºï¼š</div>
                <div class="log-area">
ğŸ¯ æ£€æµ‹åˆ°å›¾ç‰‡æ–‡ä»¶è¢«åˆ é™¤:
   ğŸ“„ æ–‡ä»¶ç±»å‹: å›¾ç‰‡
   ğŸ”— æ–‡ä»¶URL: https://xxx.aliyuncs.com/images/xxx.jpg
   ğŸ“… åˆ é™¤æ—¶é—´: 2024/12/19 ä¸‹åˆ10:35:42
ğŸ—‘ï¸ æ£€æµ‹åˆ°äº‘ç«¯æ–‡ä»¶åˆ é™¤: https://xxx.aliyuncs.com/images/xxx.jpg
ğŸ—‘ï¸ æå–æ–‡ä»¶è·¯å¾„: images/xxx.jpg
âœ… äº‘ç«¯æ–‡ä»¶åˆ é™¤æˆåŠŸ: images/xxx.jpg
                </div>
            </div>

            <div class="step">
                <div style="font-weight: 600; margin-bottom: 8px;">å¦‚æœåªæœ‰éƒ¨åˆ†æ—¥å¿—ï¼š</div>
                <ul>
                    <li>åªæœ‰æ£€æµ‹æ—¥å¿—ï¼šè¯´æ˜åˆ é™¤æ£€æµ‹æ­£å¸¸ï¼Œä½†äº‘ç«¯åˆ é™¤æœ‰é—®é¢˜</li>
                    <li>åªæœ‰"è·³è¿‡éäº‘ç«¯æ–‡ä»¶"ï¼šè¯´æ˜åˆ é™¤çš„æ˜¯æœ¬åœ°æ–‡ä»¶</li>
                    <li>æœ‰é”™è¯¯æ—¥å¿—ï¼šè¯´æ˜åˆ é™¤è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let monitoring = false;
        let originalConsoleLog = console.log;
        let originalConsoleError = console.error;
        let originalConsoleWarn = console.warn;

        function log(message, type = 'info') {
            const debugLog = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: '#81c784',
                success: '#4caf50', 
                error: '#f44336',
                warning: '#ff9800'
            };

            debugLog.innerHTML += `<div style="color: ${colors[type]}">[${timestamp}] ${message}</div>`;
            debugLog.scrollTop = debugLog.scrollHeight;
        }

        function setMonitorStatus(message, type) {
            const statusElement = document.getElementById('monitorStatus');
            statusElement.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function openWhiteboard() {
            window.open('http://localhost:5175/', '_blank');
            log('å·²æ‰“å¼€ç™½æ¿åº”ç”¨çª—å£', 'success');
        }

        function showInstructions() {
            alert(`è¯¦ç»†è°ƒè¯•è¯´æ˜ï¼š

1. ç¡®ä¿ç™½æ¿åº”ç”¨è¿è¡Œåœ¨ http://localhost:5175/
2. æŒ‰F12æ‰“å¼€æ§åˆ¶å°ï¼Œåˆ‡æ¢åˆ°Consoleæ ‡ç­¾
3. æ’å…¥äº‘ç«¯å›¾ç‰‡/è§†é¢‘ï¼ˆä¸æ˜¯æœ¬åœ°æ–‡ä»¶ï¼‰
4. é€‰ä¸­åª’ä½“æ–‡ä»¶ï¼ŒæŒ‰Deleteé”®åˆ é™¤
5. ç«‹å³æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

é‡è¦æç¤ºï¼š
- åªæœ‰äº‘ç«¯æ–‡ä»¶åˆ é™¤æ‰ä¼šæœ‰æ—¥å¿—
- æœ¬åœ°base64æ–‡ä»¶åˆ é™¤ä¼šæ˜¾ç¤º"è·³è¿‡éäº‘ç«¯æ–‡ä»¶"
- å¦‚æœæ²¡æœ‰ä»»ä½•æ—¥å¿—ï¼Œå¯èƒ½æ˜¯ç¼–è¾‘å™¨æ›´æ–°æœ‰é—®é¢˜

å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
- OSSé…ç½®æ˜¯å¦æ­£ç¡®
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- æ˜¯å¦æœ‰JavaScripté”™è¯¯`);
        }

        function testBasicLog() {
            console.log('ğŸ¯ æµ‹è¯•åˆ é™¤æ£€æµ‹åŠŸèƒ½');
            console.log('   ğŸ“„ æ–‡ä»¶ç±»å‹: å›¾ç‰‡');
            console.log('   ğŸ”— æ–‡ä»¶URL: https://example.com/test.jpg');
            console.log('   ğŸ“… åˆ é™¤æ—¶é—´: ' + new Date().toLocaleString());
            
            log('åŸºç¡€æ—¥å¿—æµ‹è¯•å·²æ‰§è¡Œï¼Œè¯·æ£€æŸ¥ç™½æ¿åº”ç”¨çš„æ§åˆ¶å°', 'success');
        }

        function startLogMonitoring() {
            if (monitoring) {
                log('æ—¥å¿—ç›‘æ§å·²åœ¨è¿è¡Œä¸­', 'warning');
                return;
            }

            monitoring = true;
            setMonitorStatus('ğŸ” æ­£åœ¨ç›‘æ§æ—¥å¿—è¾“å‡º...', 'info');
            log('å¼€å§‹ç›‘æ§ç™½æ¿åº”ç”¨æ—¥å¿—', 'success');

            // æ‹¦æˆªconsoleæ–¹æ³•
            console.log = function(...args) {
                originalConsoleLog.apply(console, args);
                if (args.some(arg => String(arg).includes('ğŸ¯') || String(arg).includes('ğŸ—‘ï¸') || String(arg).includes('âœ…'))) {
                    log('æ£€æµ‹åˆ°åˆ é™¤ç›¸å…³æ—¥å¿—: ' + args.join(' '), 'success');
                }
            };

            console.error = function(...args) {
                originalConsoleError.apply(console, args);
                if (args.some(arg => String(arg).includes('åˆ é™¤') || String(arg).includes('äº‘ç«¯'))) {
                    log('æ£€æµ‹åˆ°åˆ é™¤é”™è¯¯æ—¥å¿—: ' + args.join(' '), 'error');
                }
            };

            console.warn = function(...args) {
                originalConsoleWarn.apply(console, args);
                if (args.some(arg => String(arg).includes('åˆ é™¤') || String(arg).includes('äº‘ç«¯'))) {
                    log('æ£€æµ‹åˆ°åˆ é™¤è­¦å‘Šæ—¥å¿—: ' + args.join(' '), 'warning');
                }
            };

            log('æ—¥å¿—æ‹¦æˆªå™¨å·²å®‰è£…ï¼Œç°åœ¨åˆ é™¤å›¾ç‰‡/è§†é¢‘è¯•è¯•', 'info');
        }

        function stopLogMonitoring() {
            if (!monitoring) {
                log('æ—¥å¿—ç›‘æ§æœªåœ¨è¿è¡Œ', 'warning');
                return;
            }

            monitoring = false;
            
            // æ¢å¤åŸå§‹consoleæ–¹æ³•
            console.log = originalConsoleLog;
            console.error = originalConsoleError;
            console.warn = originalConsoleWarn;

            setMonitorStatus('â¹ï¸ æ—¥å¿—ç›‘æ§å·²åœæ­¢', 'warning');
            log('æ—¥å¿—ç›‘æ§å·²åœæ­¢', 'info');
        }

        function clearDebugLog() {
            document.getElementById('debugLog').innerHTML = 'æ—¥å¿—å·²æ¸…ç©º...\n';
            log('è°ƒè¯•æ—¥å¿—å·²æ¸…ç©º', 'info');
        }

        // é¡µé¢åŠ è½½æ—¶çš„æç¤º
        window.onload = function() {
            log('åˆ é™¤åŠŸèƒ½è°ƒè¯•å·¥å…·å·²å°±ç»ª', 'success');
            log('è¯·æŒ‰ç…§æ­¥éª¤é€é¡¹æ£€æŸ¥å’Œæµ‹è¯•åˆ é™¤åŠŸèƒ½', 'info');
        };

        // é¡µé¢å¸è½½æ—¶æ¢å¤console
        window.onbeforeunload = function() {
            if (monitoring) {
                console.log = originalConsoleLog;
                console.error = originalConsoleError;
                console.warn = originalConsoleWarn;
            }
        };
    </script>
</body>
</html> 