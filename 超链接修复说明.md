# 超链接功能修复说明

## 问题描述
之前的超链接功能存在问题：当用户选中文字后点击超链接图标，在弹出的输入框中输入URL并按回车时，会导致文本换行，而不是将选中的文字转换为超链接。

## 问题原因
问题出现在 `insertLink` 函数的逻辑中：
1. 用户选中文字并点击超链接按钮时，编辑器有选区
2. 显示链接输入框后，编辑器失去焦点，选区丢失
3. 用户输入URL按回车时，`insertLink` 函数判断没有选区，使用 `addMark` 方式插入链接
4. 这导致在当前位置插入新的链接文本，而不是将原有选中文字转换为链接

## 修复方案
1. **保存原始选区**：在显示链接输入框时，保存当前的编辑器选区
2. **恢复选区**：在插入链接时，先恢复保存的选区
3. **应用链接**：使用 `wrapNodes` 将选中的文字包裹为链接节点

## 具体修改
1. 在 `HoveringToolbar` 组件中添加 `savedSelection` 状态
2. 点击超链接按钮时保存当前选区
3. 修改 `insertLink` 函数接受保存的选区作为参数
4. 在应用链接前先恢复选区

## 测试步骤
1. 在编辑器中输入一些文字，例如："访问我的网站"
2. 选中其中的文字，例如选中"我的网站"
3. 点击超链接图标（🔗）
4. 在弹出的输入框中输入URL，例如："https://example.com"
5. 按回车键

**期望结果**：选中的文字"我的网站"应该变成超链接，点击可以预览网页，而不是在文字后面新增链接导致换行。

## 技术细节
- 使用 Slate.js 的 `Transforms.select()` 恢复选区
- 使用 `Transforms.wrapNodes()` 包裹选中文字为链接节点
- 使用 `Range.isExpanded()` 判断是否有选中文字
- 在输入框关闭时清理保存的选区状态

这个修复确保了超链接功能的直观性：选中文字 → 点击链接按钮 → 输入URL → 文字变成链接，符合用户期望的操作流程。 